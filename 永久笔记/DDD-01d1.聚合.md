---
title: DDD-聚合
tags:
  - DDD
status: Done
createDate: 2024-01-05
---

## 什么是聚合

![[什么是聚合.png]]

聚合是拥有事物一致性（**强一致性**）的领域对象组合。

## 聚合的原则

- **聚合内的实体适用事物一致性；**
- **聚合之间适用最终一致性；**
- **不脱离聚合根修改聚合内部对象；**
- 聚合根有全局唯一标识，聚合内部实体只有局部标识（当然给了全局唯一标识也不会错）；
- 聚合根可以从资源库获取，聚合内部实体不能；
- ……

前面三条原则是最重要的。

## 聚合解决什么问题

- 优雅的实现一致性
- 聚合是限界上下文粒度的下限

分布式事务的最佳解决办法：尽量不去使用

CAP原则：一致性、可用性、分区容忍性

## 聚合的识别

实体是否在所有活动中都协同变更

